<h2 class="main-title">Create Announcement</h2>
<div class="announce-card">
  <form [formGroup]="form" (ngSubmit)="submit()" class="announce-form">
    <div class="input-row">
      <label>
        <span>Title</span>
        <input formControlName="title" placeholder="Announcement Title" />
      </label>
      <label>
        <span>Category</span>
        <select formControlName="category">
          <option *ngFor="let c of categories" [value]="c">{{ c | titlecase }}</option>
        </select>
      </label>
    </div>
    <label class="full">
      <span>Message</span>
      <textarea formControlName="message" rows="3" placeholder="Details for residents..."></textarea>
    </label>
    <div class="err" *ngIf="form.controls['message'].touched && form.controls['message'].invalid">
      Message is required.
    </div>
    <button type="submit" class="btn">Post</button>
    <div class="err" *ngIf="error()">{{ error() }}</div>
  </form>
</div>
<hr class="divider" />

<div class="recent-header">
  <h3 class="recent-title">Recent Announcements</h3>
  <span class="recent-count">{{ items.length }} total</span>
</div>

<div *ngIf="items.length === 0" class="empty-state">
  <div class="empty-title">No announcements yet</div>
  <div class="empty-sub">Post one above and it will show up here.</div>
</div>

<div class="announcement-grid" *ngIf="items.length > 0">
  <div *ngFor="let a of items" class="announcement-card">
    <div class="card-top">
      <div class="meta">
        <span class="pill">{{ a.category | titlecase }}</span>
        <span class="date">{{ a.createdAt | date:'short' }}</span>
      </div>

      <button class="icon-btn danger" type="button" (click)="delete(a.id)" aria-label="Delete announcement">
        âœ•
      </button>
    </div>

    <div class="card-title">{{ a.title }}</div>
    <div class="card-body">{{ a.message }}</div>
  </div>
</div>
